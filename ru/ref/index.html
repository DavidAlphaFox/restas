<html> <head> <meta http-equiv="Content-Type" content="text/html; charset='utf-8'" /> <meta name="keywords" content="restas,web,framework,web framework,REST,Common Lisp,lisp" /> <title>API Reference</title> <link rel="stylesheet" type="text/css" href="../static/style.css" /> </head> <body> <a href="http://github.com/archimag/restas/"> <img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"> </a> <div id="frame"> <div id="page-title"> <h1>RESTAS</h1> <b>Фрэймворк для разработки web-приложений на Common Lisp</b> </div> <div id="menu"> <ul> <li> <a href="../index.html">Начало</a>  </li><li> <a href="../overview.html">Обзор</a>  </li><li> <a href="../installation.html">Установка</a>  </li><li> <a href="../tutorial/contents.html">Введение</a> <ul> <li> <a href="../tutorial/hello-world.html">Hello World</a> </li><li> <a href="../tutorial/pastebin.html">Pastebin</a> </li> </ul> </li><li> <a href="../manual/contents.html">Руководство</a> <ul> <li> <a href="../manual/routes.html">Маршруты</a> </li><li> <a href="../manual/modules.html">Модули</a> </li><li> <a href="../manual/view.html">Представление</a> </li><li> <a href="../manual/special-pages.html">Специальные страницы</a> </li><li> <a href="../manual/decorators.html">Декораторы</a> </li><li> <a href="../manual/daemon.html">Демонизация</a> </li><li> <a href="../manual/slime.html">SLIME</a> </li> </ul> </li><li> <strong>API Reference</strong>  </li> </ul> </div> <div id="content"> <div id="id1" class="document"><h1>API Reference<a href="#id1" class="headerlink" title="Permalink to this headline">¶</a></h1><!-- -*- RST -*- -->
<a id="api-reference" class="target" name="api-reference"></a><p><dl class="entity-description"><dl id="restas-start"><dt><span class="common-lisp-entity">Function <span class="name">restas:start</span></span> (module &key hostname (port 80) (context (make-context)) acceptor-class ssl-certificate-file ssl-privatekey-file ssl-privatekey-password)<a href="#restas-start" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Устанавливает (запускает) модуль для обработки HTTP-запросов. <a class="reference" href="http://restas.lisper.ru/"><span>RESTAS</span></a> поддерживает концепцию <a class="reference" href="http://httpd.apache.org/docs/current/vhosts/"><span>виртуальных хостов</span></a>, что позволяет в рамках одного процесса размещать несколько сайтов с различными доменными именами. Кроме того, также возможно обслуживание нескольких портов.</p>
<p><strong><span>Параметры</span></strong>:</p>
<ul>
<li><p class="first last">module - <a class="reference" href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_p.htm#package_designator"><span>package designator</span></a>, индентифицирующий модуль, определённый с помощью <a class="common-lisp-entity" href="index.html#restas-define-module">restas:define-module</a></p>
</li>
<li><p class="first last">hostname - имя хоста, запросы к которму долж</p>
</li>
<li><p class="first last">port - порт на котором будут приниматься запросы</p>
</li>
<li><p class="first last">context - окружение, аналогичное указываемуму в <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a>, которое позволяет настроить параметры модуля.</p>
</li>
<li><p class="first last">acceptor-class - символ, который определяет какой класс должен использоваться для создания acceptor. Данный класс должен наследовать от <span class="common-lisp-entity">restas:restas-acceptor</span> или <span class="common-lisp-entity">restas:restas-ssl-acceptor</span>.</p>
</li>
<li><p class="first last">ssl-certificate-file - путь к файлу-сертификату. Указывается для соединения по протоколу SSL (на Lispworks можно использовать один файл содержащий и сертификат и ключ, в этом случае параметр ssl-privatekey-file задавать не нужно).</p>
</li>
<li><p class="first last">ssl-privatekey-file - путь к файлу-ключу в PEM формате.</p>
</li>
<li><p class="first last">ssl-privatekey-password - пароль (как строка) для использования файла-ключа (или NIL, что задано по умолчанию, если пароль не требуется).</p>
</li>
</ul>
<p>Данная функция может быть вызвана несколько раз с различными параметрами. Если разные модули были запущены для одной и той же комбинации имени хости и номера порта, то возможны конфликты маршрутов и в случае их возникновеня способ диспетчерезации запросов не определён.</p>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-reconnect-all-routes"><dt><span class="common-lisp-entity">Function <span class="name">restas:reconnect-all-routes</span></span> ()<a href="#restas-reconnect-all-routes" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Реинициализирует диспетчер запросов. Обычно в непосредственном вызове данной функции нет необходимости, посольку при выполнении (:execute) макросов <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a> и <a class="common-lisp-entity" href="index.html#restas-define-route">restas:define-route</a> она вызывается автоматически.</dd></dl></p>
<div id="специальные-переменные" class="section"><h2>Специальные переменные<a href="#специальные-переменные" class="headerlink" title="Permalink to this headline">¶</a></h2><p><dl class="entity-description"><dl id="restas-default-host-redirect"><dt><span class="common-lisp-entity">Variable restas:*default-host-redirect*</span><a href="#restas-default-host-redirect" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Хост по-умолчанию, на который будут перенаправлять запросы, адресованные к незарегистрированному хосту.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-bindings"><dt><span class="common-lisp-entity">Variable restas:*bindings*</span><a href="#restas-bindings" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>В этой переменной сохраняется набор распарсенных переменных маршрута.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-submodule"><dt><span class="common-lisp-entity">Variable restas:*submodule*</span><a href="#restas-submodule" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Активный submodule, которому принадлежит обрабатываемый маршрут</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-route"><dt><span class="common-lisp-entity">Variable restas:*route*</span><a href="#restas-route" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Обрабатываемый маршрут.</dd></dl></p>
</div>
<div id="маршруты" class="section"><h2>Маршруты<a href="#маршруты" class="headerlink" title="Permalink to this headline">¶</a></h2><p><dl class="entity-description"><dl id="restas-define-route"><dt><span class="common-lisp-entity">Macro <span class="name">restas:define-route</span></span> (name (template &key (method :get) content-type render-method requirement parse-vars decorators) &body body)<a href="#restas-define-route" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Создаёт новый маршрут в текущем модуле</p>
<ul>
<li><p class="first last">name - уникальный <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a>, являющийся индефикатором маршрута. Один и тот же <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a> не может использоваться для различных маршрутов.</p>
</li>
<li><p class="first last">template - шаблон URL, на основе которого проверяется соответствие маршрута запросу. Может содержать переменные, которые непосредственно доступны в теле маршрута.</p>
</li>
<li><p class="first last">method - тип обрабатываемого HTTP-запроса, возможные значения: :GET, :POST, :PUT, :DELETE.</p>
</li>
<li><p class="first last">content-type - <strong><span>Content-Type</span></strong> результата обработки запроса, устанавлиевается в заголовке HTTP-ответа.</p>
</li>
<li><p class="first last">headers - <em><span>plist</span></em> с именами заголовков HTTP-ответа и их значениями. Используется объединение с <span class="common-lisp-entity">*default-headers*</span>, причем в случае конфликта используются значения из опции маршрута.</p>
</li>
<li><p class="first last">render-method - объект, который будет использоваться в вызове <a class="common-lisp-entity" href="index.html#restas-render-object">restas:render-object</a> для обработки результата маршрута перед отдачей его клиенту.</p>
</li>
<li><p class="first last">requirement - произвольная функция, которая вызвается для проверки соответствия маршрута условиям запроса. Если результат <a href="http://www.lispworks.com/reference/HyperSpec/Body/a_nil.htm" class="common-lisp-entity">NIL</a>, то маршрут считается не удовлетворяющим запросу.</p>
</li>
<li><p class="first last">parse-vars - <em><span>plist</span></em> с именами переменных (в виде <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_kwd.htm" class="common-lisp-entity">keyword</a>) и функциям их парсинга.</p>
</li>
<li><p class="first last">decorators - список декораторов маршрута, см. <a href="../manual/decorators.html#декораторы">Декораторы</a>.</p>
</li>
<li><p class="first last">body - тело обработчика, может содержать произвольный код, результат выполнения которого возвращается клиенту (после обработки с помощью <a class="common-lisp-entity" href="index.html#restas-render-object">restas:render-object</a>).</p>
</li>
</ul>
<p>Пример объявления тривиального маршрута:</p>
<p><div class="code"><span class="paren1">(<span class=""><i><span class="symbol">restas:define-route</span></i> main <span class="paren2">(<span class=""><span class="string">""</span></span>)</span><br>&nbsp;&nbsp;<span class="string">"&lt;h1&gt;Hello world!&lt;/h1&gt;"</span></span>)</span></div></p>
<p>Подробнее об определении маршрутов смотрие <a href="../manual/routes.html#маршруты">Маршруты</a></p>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-route-symbol"><dt><span class="common-lisp-entity">Function <span class="name">restas:route-symbol</span></span> (route)<a href="#restas-route-symbol" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Возвращает <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a>, связанный с объектом-маршрутом (например, во время обработки запроса такой объект связан  с переменной <a class="common-lisp-entity" href="index.html#restas-route">restas:*route*</a>).</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-genurl"><dt><span class="common-lisp-entity">Function <span class="name">restas:genurl</span></span> (route-symbol &rest args)<a href="#restas-genurl" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Вычисляет URL маршрута на основе индентифицирующего <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a> и набора значений переменных его шаблона (см. <a class="common-lisp-entity" href="index.html#restas-define-route">restas:define-route</a>)</p>
<ul>
<li><p class="first last">route-symbol - индентификатор маршрута</p>
</li>
<li><p class="first last">args - последовательность (в формате <em><span>plist</span></em>) имён переменных маршрута и их значений.</p>
</li>
</ul>
<p>Пример:</p>
<p><div class="code"><span class="paren1">(<span class="">restas:genurl 'my-route<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">:arg1</span> <span class="string">"foo"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">:arg2</span> <span class="string">"bar"</span></span>)</span></div></p>
<p><strong><span>Важно</span></strong>: данная функция работает правильно только для маршрутов, которые находятся в одном модуле с обрабатываемым в момент вызова маршрутом.</p>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-genurl-submodule"><dt><span class="common-lisp-entity">Function <span class="name">restas:genurl-submodule</span></span> (submodule-symbol route-symbol &rest args)<a href="#restas-genurl-submodule" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Аналогична <a class="common-lisp-entity" href="index.html#restas-genurl">restas:genurl</a>, но используется для маршрутов из подключаемых с помощью <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a> модулей.</p>
<ul>
<li><p class="first last">submodule-symbol - индефикатор субмодуля, указаный при его определении с помощю <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a>.</p>
</li>
</ul>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-gen-full-url"><dt><span class="common-lisp-entity">Function <span class="name">restas:gen-full-url</span></span> (route &rest args)<a href="#restas-gen-full-url" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Данная функция аналогична <a class="common-lisp-entity" href="index.html#restas-genurl">restas:genurl</a> за тем исключением, что в генерируемый URL также включается имя хоста.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-redirect"><dt><span class="common-lisp-entity">Function <span class="name">restas:redirect</span></span> (route-symbol &rest args)<a href="#restas-redirect" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Перенаправляет запрос с помощью <span class="common-lisp-entity">hunchentoot:redirect</span> для URL, вычисляемого с помощью <a class="common-lisp-entity" href="index.html#restas-genurl">restas:genurl</a>. Параметры аналогичны параметрам функции <a class="common-lisp-entity" href="index.html#restas-genurl">restas:genurl</a>.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-abort-route-handler"><dt><span class="common-lisp-entity">Function <span class="name">restas:abort-route-handler</span></span> (obj &key return-code content-typе)<a href="#restas-abort-route-handler" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Немедленно завершает обработку запроса и передаёт <em><span>OBJ</span></em> в <a class="common-lisp-entity" href="index.html#restas-render-object">restas:render-object</a> для формирование ответа. Если указан keyword параметр <em><span>RETURN-CODE</span></em>, то он используется для установки статуса ответа, что позволяет вернуть специальную страницу (500, 404 и т.п.) с произвольным содержанием (по умолчанию такие страницы формируется стандартным образом, не зависимо от возвращаемого обработчиком результата).</dd></dl></p>
</div>
<div id="модули" class="section"><h2>Модули<a href="#модули" class="headerlink" title="Permalink to this headline">¶</a></h2><p><dl class="entity-description"><dl id="restas-define-module"><dt><span class="common-lisp-entity">Macro <span class="name">restas:define-module</span></span> (name &rest options)<a href="#restas-define-module" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Инициализирует новый модуль: создаёт новый <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_pkg.htm" class="common-lisp-entity">package</a> и проводит его инициализацию (добавляет в него некоторые служебные переменные)</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-initialize-module-instance"><dt><span class="common-lisp-entity">Function <span class="name">restas:initialize-module-instance</span></span> ((module context))<a href="#restas-initialize-module-instance" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Generic-функция, вызывается при подключении модуля с помощью <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a>. Может использваться, например, для дополнительной настройки контекста субмодуля. Должна находиться внутри пакета, определённого с помощью <a class="common-lisp-entity" href="index.html#restas-define-module">restas:define-module</a>.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-finalize-module-instance"><dt><span class="common-lisp-entity">Function <span class="name">restas:finalize-module-instance</span></span> ((module context))<a href="#restas-finalize-module-instance" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Generic-функция, вызывается при повторном вычислении <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a> и может использоваться, например, для освобождении ресрсов, выделенных при инциализации субмодуля.</dd></dl></p>
</div>
<div id="субмодули" class="section"><h2>Субмодули<a href="#субмодули" class="headerlink" title="Permalink to this headline">¶</a></h2><p><dl class="entity-description"><dl id="restas-mount-submodule"><dt><span class="common-lisp-entity">Macro <span class="name">restas:mount-submodule</span></span> (name (module &rest decorators) &rest bindings)<a href="#restas-mount-submodule" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Определяет субмодуль, который становится частью модуля, в пакете которого он определяется.</p>
<ul>
<li><p class="first last">name - индентификатор (<a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a>) субмодуля.</p>
</li>
<li><p class="first last">module - <a class="reference" href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_p.htm#package_designator"><span>package designator</span></a> присоеденяемого модуля.</p>
</li>
<li><p class="first last">decorators - список декораторов субмодуля, см. <a href="../manual/decorators.html#декораторы">Декораторы</a>.</p>
</li>
<li><p class="first last">bindings - набор символов переменных и их значений, определяющий контекст субмодуля. Обработка маршрутов, принадлежащих данному субмодулю, будет производиться в этом контексте с помощью вызова <a href="http://www.lispworks.com/reference/HyperSpec/Body/s_progv.htm" class="common-lisp-entity">progv</a>.</p>
</li>
</ul>
<p>Пример:</p>
<p><div class="code"><span class="paren1">(<span class="">restas:mount-submodule tmp <span class="paren2">(<span class=""><span class="keyword">#:restas.directory-publisher</span></span>)</span><br>&nbsp;&nbsp;<span class="paren2">(<span class=""><span class="special">restas.directory-publisher:*baseurl*</span> '<span class="paren3">(<span class=""><span class="string">"tmp"</span></span>)</span></span>)</span><br>&nbsp;&nbsp;<span class="paren2">(<span class=""><span class="special">restas.directory-publisher:*directory*</span> #P<span class="string">"/tmp/"</span></span>)</span></span>)</span></div></p>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-submodule-symbol"><dt><span class="common-lisp-entity">Function <span class="name">restas:submodule-symbol</span></span> (submodule)<a href="#restas-submodule-symbol" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Возвращает <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a>, связанный с объектом-субмодулем (например, во время обработки запроса такой объект связан  с переменной <a class="common-lisp-entity" href="index.html#restas-submodule">restas:*submodule*</a>).</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-submodule-module"><dt><span class="common-lisp-entity">Function <span class="name">restas:submodule-module</span></span> (submodule)<a href="#restas-submodule-module" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Возвращает <a class="reference" href="http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_p.htm#package_designator"><span>package designator</span></a>, связанный с объектом-субмодулем</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-submodule-parent"><dt><span class="common-lisp-entity">Function <span class="name">restas:submodule-parent</span></span> (submodule)<a href="#restas-submodule-parent" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Возвращает субмодуль, к которому присоединён переданный субмодуль. С помощью макроса <a class="common-lisp-entity" href="index.html#restas-mount-submodule">restas:mount-submodule</a> можно создавать целые иерархии субмодулей.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-with-submodule-context"><dt><span class="common-lisp-entity">Macro <span class="name">restas:with-submodule-context</span></span> (submodule &body body)<a href="#restas-with-submodule-context" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Позволяет произвольный выполнить код в окружении контекста указанного субмодуля.</dd></dl></p>
</div>
<div id="отображение" class="section"><h2>Отображение<a href="#отображение" class="headerlink" title="Permalink to this headline">¶</a></h2><p><dl class="entity-description"><dl id="restas-render-object"><dt><span class="common-lisp-entity">Function <span class="name">restas:render-object</span></span> (drawer object)<a href="#restas-render-object" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Generic-метод, используется для обработки данных, возвращаемых обработчиком маршрутов (определяемого в теле <a class="common-lisp-entity" href="index.html#restas-define-route">restas:define-route</a>). Если в <a class="common-lisp-entity" href="index.html#restas-define-route">restas:define-route</a> не указан параметр :render-method, то в качестве объекта <em><span>drawer</span></em> используется значение переменной <span class="common-lisp-entity">*default-render-method*</span> из модуля, в котором определён обрабатываемый маршрут (она создаётся автоматически при определении модуля с помощью <a class="common-lisp-entity" href="index.html#restas-define-module">restas:define-module</a> и её значение равно <a href="http://www.lispworks.com/reference/HyperSpec/Body/a_nil.htm" class="common-lisp-entity">NIL</a>).</p>
<p>Более подробную информацию смотрите в разделе <a href="../manual/view.html#представление">Представление</a>.</p>
</dd></dl></p>
</div>
<div id="контекст" class="section"><h2>Контекст<a href="#контекст" class="headerlink" title="Permalink to this headline">¶</a></h2><p>В <a class="reference" href="http://restas.lisper.ru/"><span>RESTAS</span></a> для обеспечения модульности используется механизм, напоминающий <a class="reference" href="http://www.gnu.org/software/emacs/elisp/html_node/Intro-to-Buffer_002dLocal.html"><span>Buffer-Local Variables</span></a> в <a class="reference" href="http://www.gnu.org/software/emacs/"><span>GNU Emacs</span></a>.</p>
<p><dl class="entity-description"><dl id="restas-make-context"><dt><span class="common-lisp-entity">Macro <span class="name">restas:make-context</span></span> (&body bindings)<a href="#restas-make-context" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Создаёт новый динамический контекст, связывающий динамические переменные со значениями. Пример:</p>
<p><div class="code"><span class="paren1">(<span class="">restas:make-context <span class="paren2">(<span class=""><span class="special">restas.directory-publisher:*baseurl*</span> '<span class="paren3">(<span class=""><span class="string">"tmp"</span></span>)</span></span>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="paren2">(<span class=""><span class="special">restas.directory-publisher:*directory*</span> #P<span class="string">"/tmp/"</span></span>)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="paren2">(<span class=""><span class="special">restas.directory-publisher:*autoindex*</span> <a href="http://www.lispworks.com/reference/HyperSpec/Body/a_t.htm" class="symbol">t</a></span>)</span></span>)</span></div></p>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-context-add-variable"><dt><span class="common-lisp-entity">Function <span class="name">restas:context-add-variable</span></span> (context symbol &optional value)<a href="#restas-context-add-variable" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd><p>Добавляет новую переменную в контекст</p>
<ul>
<li><p class="first last">context - контекст</p>
</li>
<li><p class="first last">symbol - <a href="http://www.lispworks.com/reference/HyperSpec/Body/t_symbol.htm" class="common-lisp-entity">symbol</a>, связанный с динамической переменной</p>
</li>
<li><p class="first last">value - значение переменной, если не указано, то используется результат вызова <a href="http://www.lispworks.com/reference/HyperSpec/Body/f_symb_5.htm" class="common-lisp-entity">symbol-value</a>.</p>
</li>
</ul>
</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-context-remove-variable"><dt><span class="common-lisp-entity">Function <span class="name">restas:context-remove-variable</span></span> (context symbol)<a href="#restas-context-remove-variable" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Удаляет переменную из контекста</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-context-symbol-value"><dt><span class="common-lisp-entity">Function <span class="name">restas:context-symbol-value</span></span> (context symbol => value, present-p)<a href="#restas-context-symbol-value" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Возращает значение <em><span>value</span></em> динамической переменной, если переменная отсутствует в контексте, то для вычисления её значения используется <a href="http://www.lispworks.com/reference/HyperSpec/Body/f_symb_5.htm" class="common-lisp-entity">symbol-value</a>, а present-p равен <a href="http://www.lispworks.com/reference/HyperSpec/Body/a_nil.htm" class="common-lisp-entity">NIL</a>.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-with-context"><dt><span class="common-lisp-entity">Macro <span class="name">restas:with-context</span></span> (context &body body)<a href="#restas-with-context" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Выполняет код в окружении заданного контекста с помощью <a href="http://www.lispworks.com/reference/HyperSpec/Body/s_progv.htm" class="common-lisp-entity">progv</a>.</dd></dl></p>
</div>
<div id="отладка" class="section"><h2>Отладка<a href="#отладка" class="headerlink" title="Permalink to this headline">¶</a></h2><p><dl class="entity-description"><dl id="restas-debug-mode-on"><dt><span class="common-lisp-entity">Function <span class="name">restas:debug-mode-on</span></span> ()<a href="#restas-debug-mode-on" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Устанавливает отладочный режим.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-debug-mode-off"><dt><span class="common-lisp-entity">Function <span class="name">restas:debug-mode-off</span></span> ()<a href="#restas-debug-mode-off" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Отменяет отладочный режим.</dd></dl></p>
<p><dl class="entity-description"><dl id="restas-max-debugging-threads"><dt><span class="common-lisp-entity">Variable restas:*max-debugging-threads*</span><a href="#restas-max-debugging-threads" class="headerlink" title="Permalink to this definition">¶</a></dt></dl><dd>Максимально колличество одновременно отлаживаемых поток.</dd></dl></p>
</div>
</div> </div> </div> <div class="bottom">@2009-2011 <a href="mailto:archimag@gmail.com">Moskvitin Andrey</a></div> </body> </html>