<html> <head> <meta http-equiv="Content-Type" content="text/html; charset='utf-8'" /> <meta name="keywords" content="restas,web,framework,web framework,REST,Common Lisp,lisp" /> <title>SLIME</title> <link rel="stylesheet" type="text/css" href="../static/style.css" /> </head> <body> <a href="http://github.com/archimag/restas/"> <img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"> </a> <div id="frame"> <div id="page-title"> <h1>RESTAS</h1> <b>Framework for web application development in Common Lisp</b> </div> <div id="menu"> <ul> <li> <a href="../index.html">Home</a>  </li><li> <a href="../overview.html">Overview</a>  </li><li> <a href="../installation.html">Installation</a>  </li><li> <a href="../tutorial/contents.html">Tutorials</a> <ul> <li> <a href="../tutorial/hello-world.html">Hello World</a> </li><li> <a href="../tutorial/pastebin.html">Pastebin</a> </li> </ul> </li><li> <a href="contents.html">Manual</a> <ul> <li> <a href="routes.html">Routes</a> </li><li> <a href="modules.html">Modules</a> </li><li> <a href="view.html">View</a> </li><li> <a href="special-pages.html">Special pages</a> </li><li> <a href="decorators.html">Decorators</a> </li><li> <a href="daemon.html">Daemonization</a> </li><li> <strong>SLIME</strong> </li> </ul> </li><li> <a href="../ref/index.html">API Reference</a>  </li> </ul> </div> <div id="content"> <div id="id1" class="document"><h1>SLIME<a href="#id1" class="headerlink" title="Permalink to this headline">¶</a></h1><h2 id="m-c-x-vs-c-c-c-c">M-C-x vs C-c C-c<a href="#m-c-x-vs-c-c-c-c" class="headerlink" title="Permalink to this headline">¶</a></h2><a id="manual-slime" class="target" name="manual-slime"></a><p>Powerful support for interactive development is one of the strengths of Common Lisp. <a class="reference" href="http://restas.lisper.ru/"><span>RESTAS</span></a> aspires to provide corresponding abilities in the web development domain. This possibility is provided by <a class="common-lisp-entity" href="../ref/index.html#restas-reconnect-all-routes">restas:reconnect-all-routes</a> function reinitializing the request dispatcher. The definitions of submodules (<a class="common-lisp-entity" href="../ref/index.html#restas-mount-submodule">restas:mount-submodule</a>) and routes (<a class="common-lisp-entity" href="../ref/index.html#restas-define-route">restas:define-route</a>) can be re-evaluated at any moment and any introduced changes will immediately affect the work of active RESTAS applications. Among other things, these macros include the following code:</p>
<p><div class="code"><span class="paren1">(<span class=""><a href="http://www.lispworks.com/reference/HyperSpec/Body/s_eval_w.htm" class="symbol"><i><span class="symbol">eval-when</span></i></a> <span class="paren2">(<span class=""><span class="keyword">:execute</span></span>)</span><br>&nbsp;&nbsp;<span class="paren2">(<span class="">reconnect-all-routes</span>)</span></span>)</span></div></p>
<p>That is, for changes to take effect, these macros must be executed, and not just loaded or compiled. When using <a class="reference" href="http://common-lisp.net/project/slime/"><span>SLIME</span></a> it is done by using C-M-x command (slime-eval-defun) instead of usual C-c C-c (slime-compile-defun). However, if only the body of route (defined with macro <a class="common-lisp-entity" href="../ref/index.html#restas-define-route">restas:define-route</a>) has changed then for activation of the changes just C-c C-c compiling is enough, and it is indeed recommended do it in such way, because compilation, contrary to execution, lets you save information about the position of the route in the source code (technically it is caused by route definition creating a function with the same name), and this can be very useful for working with site map (see later).</p>
<div id="id2" class="section"><h2>SLIME-ARCHIMAG<a href="#id2" class="headerlink" title="Permalink to this headline">¶</a></h2><p>When using <a class="reference" href="http://github.com/archimag/slime-archimag"><span>SLIME-ARCHIMAG</span></a> commands <em><span>M-x restas-inspect-module</span></em> and <em><span>M-x restas-inspect-vhost-list</span></em> become available in Emacs. They are implemented on the basis of standard SLIME INSPECTOR (object inspector).</p>
<div id="module-inspector" class="section"><h3>Module inspector<a href="#module-inspector" class="headerlink" title="Permalink to this headline">¶</a></h3><p>It is activated by call to <em><span>M-x restas-inspect-module</span></em> and when you use it, it is important of specify the module's name (name of the corresponding package).</p>
<div class="image"><img src="../static/module-inspector.png" alt="module inspector" /></div>
<p>The inspector appears and shows you the following:</p>
<ul>
<li><p class="first last">Initialization and finalization functions of module. You can open their definitions by placing cursor to the show function and pressing "." (slime-inspector-show-source command), this is <a class="reference" href="http://common-lisp.net/project/slime/"><span>SLIME</span></a> standard ability.</p>
</li>
<li><p class="first last">The list of routes defined by the module. Enter or Space will open more detailed information about a route. And "." will show its definition in the source code.</p>
</li>
<li><p class="first last">The list of module submodules. Enter or Space will open submodule inspector.</p>
</li>
</ul>
</div>
<div id="host-inspector" class="section"><h3>Host inspector<a href="#host-inspector" class="headerlink" title="Permalink to this headline">¶</a></h3><p><em><span>M-x restas-inspect-vhost-list</span></em> command shows the list of active virtual hosts.</p>
<div class="image"><img src="../static/vhosts-inspector.png" alt="vhosts inspector" /></div>
<p>After selecting needed vhost you get access to the "site map" and the list of submodules which were connected to vhost at the site start time by function <a class="common-lisp-entity" href="../ref/index.html#restas-start">restas:start</a>.</p>
<div class="image"><img src="../static/vhost-inspector.png" alt="vhosts inspector" /></div>
</div>
<div id="site-map" class="section"><h3>Site map<a href="#site-map" class="headerlink" title="Permalink to this headline">¶</a></h3><div class="image"><img src="../static/site-map-inspector.png" alt="site map inspector" /></div>
<p>Site map inspector lets you visually examine the tree of routes. The variables of templates are highlighted and shown with prefixes $ and * (for wildcard variables). Each variable can also be examined, for example, for seeing which function parses a variable. At the end of each leaf of this tree a route object is placed and if you press "." you will go to the place of route definition, and if you hit Enter this will let you examine it in more detail (which HTTP method it processes, which checks are made for it and so on). Therefore this functionality lets you study and better understand how the processing of requests proceeds and also it can be used for a simple web application oriented code navigation.</p>
</div>
<div id="submodule-inspector" class="section"><h3>Submodule inspector<a href="#submodule-inspector" class="headerlink" title="Permalink to this headline">¶</a></h3><div class="image"><img src="../static/submodule-inspector.png" alt="submodule inspector" /></div>
<p>Submodule inspector does look like the module inspector, but it also contains the Context section, where variables bound during submodule activation with <a class="common-lisp-entity" href="../ref/index.html#restas-mount-submodule">restas:mount-submodule</a> are shown.</p>
<div class="image"><img src="../static/planet-submodule-inspector.png" alt="planet submodule inspector" /></div>
<p><strong><span>"Use this context as global"</span></strong> command makes it global (by direct assigning values to corresponding variables), this can become very handy for debugging a web application in REPL. After doing so you can return to original state with command <strong><span>"Restore global context"</span></strong>.</p>
</div>
</div>
</div> </div> </div> <div class="bottom">@2009-2011 <a href="mailto:archimag@gmail.com">Moskvitin Andrey</a></div> </body> </html>